# Dikarier Core Plugin для RPG Maker MZ

**Версия:** 1.1  
**Автор:** Dizia DK (Dikarier Plugin)  
**Лицензия:** MIT

Плагин-ядро для RPG Maker MZ, предоставляющий сборник независимых утилит и системных улучшений для расширения возможностей движка.

[Читать на английском (Read in English)](README.md)

---

## Введение

Dikarier Core (DCore) — это не зависимость для других плагинов, а мощный сборник независимых утилит и системных улучшений для RPG Maker MZ. Его цель — расширить стандартные возможности движка, предоставляя разработчикам больше контроля и гибкости.

Этот плагин является модульным, что позволяет легко управлять его компонентами.

## Лицензия

Этот плагин распространяется по лицензии **MIT**. Это означает, что вы можете использовать, копировать, изменять, публиковать и распространять его в любых целях, при условии сохранения оригинального уведомления об авторских правах в исходном коде.

## Требования

Для работы модулей **Ночная музыка (OST)** и **Таймеры (игровые дни/часы)** вашему проекту необходим другой плагин, который управляет внутриигровым временем. Этот плагин должен обновлять значение **Переменной часов** (для таймеров) и **Переключателя ночи** (для музыки), которые вы настраиваете в параметрах DCore.

## Установка

1.  Скачайте файл `Dikarier_Core.js`.
2.  Поместите файл в папку `js/plugins` вашего проекта.
3.  Откройте проект в RPG Maker MZ, зайдите в "Менеджер плагинов" и добавьте `Dikarier_Core` в список.
4.  Настройте параметры плагина по необходимости.

## Возможности и модули

-   **Привязка клавиш:** Назначайте общие события на нажатия клавиш.
-   **Снятие лимитов характеристик:** Убирайте ограничения на параметры оружия и брони.
-   **Требования предметов для навыков:** Блокируйте навыки, если у игрока нет нужных предметов.
-   **Автоматический полноэкранный режим:** Запускайте игру сразу в full-screen.
-   **Ночная музыка (OST):** Динамически меняйте музыку в зависимости от времени суток.
-   **Таймеры:** Мощная система таймеров (секунды, игровые дни и часы).
-   **Звук печати:** Добавляйте атмосферный звук при появлении текста в диалогах.
-   **Меню выхода:** Добавляйте настраиваемую кнопку выхода на главный экран.
-   **Пользовательские ошибки:** Вызывайте окно с ошибкой через команду плагина.
-   **Глобальный апдейт:** Выполняйте JS-скрипты на сцене карты каждый кадр.
-   **API-функции:** Используйте готовые функции для упрощения скриптовых вызовов.

## Как использовать

### Снятие лимитов характеристик
В заметках оружия или брони используйте тег `<DikarierUS>`:
```
<DikarierUS>
mhp: 5000
atk: 999
price: 10000
</DikarierUS>
```
**Доступные параметры:** `mhp`, `mmp`, `atk`, `def`, `mat`, `mdf`, `agi`, `luk`, `price`.

### Требования предметов для навыков
В заметках навыка используйте тег `<DikarierSBI>`:
```
<DikarierSBI>
item: 7   // ID предмета
count: 1  // Количество (по умолчанию 1)
</DikarierSBI>
```
Навык будет недоступен, если в инвентаре нет нужного количества предметов, которые будут израсходованы после использования.

### Ночная музыка (OST)
В заметках карты используйте тег `<DikarierNightOST>`:
```
<DikarierNightOST: Town_Night>  // Устанавливает трек Town_Night
<DikarierNightOST: None>        // Отключает музыку ночью
```
Музыка сменится, когда переключатель, указанный в параметрах, будет включен.

### Меню выхода
Включите опцию "Добавить кнопку в меню" в параметрах плагина и настройте тексты и размеры окна. Кнопка появится на титульном экране.

### API-функции (для вызова в скриптах)
-   `DCore.itemCount(id, action, count)`
-   `DCore.weaponCount(id, action, count)`
-   `DCore.armorCount(id, action, count)`

`action` (необязательно) - строка для сравнения: `"=="`, `">="`, `"<="`, `">"`, `"<"`. Если `action` не указан, используется `">="`.  
**Пример:** `DCore.itemCount(10, ">=", 5)` вернет true, если предмета с ID 10 в инвентаре 5 или больше.

-   `DCore.thisRegion()` — Возвращает ID региона, на котором стоит игрок.
-   `DCore.membersInParty(ID)` — Проверяет, есть ли актер с указанным ID в группе.
-   `DCore.changeName(ID, length)` — Открывает сцену смены имени для актера.

## Команды плагина

-   **Запустить таймер (локальный переключатель):** Запускает таймер, который включает локальный переключатель по истечении времени.
-   **Запустить таймер в секундах:** Запускает таймер, который вызывает общее событие через указанное количество реальных секунд.
-   **Запустить таймер игровых дней:** Вызывает общее событие через указанное количество игровых дней.
-   **Запустить таймер игровых часов:** Вызывает общее событие через указанное количество игровых часов.
-   **Вызвать ошибку:** Показывает настраиваемое окно с ошибкой и принудительно закрывает игру.
